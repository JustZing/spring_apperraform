{"format_version":"1.2","terraform_version":"1.11.4","variables":{"alertmanager_storage_size":{"value":"5Gi"},"instance_type":{"value":"t3.micro"},"key_name":{"value":"Zing2025"},"mysql_password":{"value":"petclinic"},"mysql_root_password":{"value":"root"},"mysql_user":{"value":"petclinic"},"private_subnet_az1_cidr":{"value":"172.16.128.0/20"},"private_subnet_az2_cidr":{"value":"172.16.144.0/20"},"project_name":{"value":"awsinfra"},"prometheus_storage_size":{"value":"10Gi"},"public_subnet_az1_cidr":{"value":"172.16.0.0/20"},"public_subnet_az2_cidr":{"value":"172.16.16.0/20"},"region":{"value":"us-east-1"},"secure_subnet_az1_cidr":{"value":"172.16.160.0/20"},"secure_subnet_az2_cidr":{"value":"172.16.176.0/20"},"vpc_cidr":{"value":"172.16.0.0/16"}},"planned_values":{"outputs":{"rds":{"sensitive":true},"security_group":{"sensitive":false},"vpc":{"sensitive":false}},"root_module":{"child_modules":[{"resources":[{"address":"module.alb_controller.helm_release.aws_lb_controller","mode":"managed","type":"helm_release","name":"aws_lb_controller","provider_name":"registry.terraform.io/hashicorp/helm","schema_version":1,"values":{"atomic":false,"chart":"aws-load-balancer-controller","cleanup_on_fail":false,"create_namespace":true,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":null,"lint":false,"max_history":0,"name":"aws-load-balancer-controller","namespace":"kube-system","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://aws.github.io/eks-charts","repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[{"name":"clusterName","type":"","value":"awsinfra-eks-cluster"},{"name":"region","type":"","value":"us-east-1"},{"name":"serviceAccount.create","type":"","value":"false"},{"name":"serviceAccount.name","type":"","value":"aws-load-balancer-controller"},{"name":"vpcId","type":""}],"set_list":[],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"upgrade_install":null,"values":null,"verify":false,"version":"1.7.3","wait":true,"wait_for_jobs":false},"sensitive_values":{"metadata":[],"postrender":[],"repository_password":true,"set":[{},{},{},{},{}],"set_list":[],"set_sensitive":[]}}],"address":"module.alb_controller"},{"resources":[{"address":"module.argocd.helm_release.argocd","mode":"managed","type":"helm_release","name":"argocd","provider_name":"registry.terraform.io/hashicorp/helm","schema_version":1,"values":{"atomic":false,"chart":"argo-cd","cleanup_on_fail":false,"create_namespace":true,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":null,"lint":false,"max_history":0,"name":"argocd","namespace":"argocd","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://argoproj.github.io/argo-helm","repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[{"name":"server.extraArgs","type":"","value":"--insecure"}],"set_list":[],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"upgrade_install":null,"values":null,"verify":false,"version":"8.1.2","wait":true,"wait_for_jobs":false},"sensitive_values":{"metadata":[],"postrender":[],"repository_password":true,"set":[{}],"set_list":[],"set_sensitive":[]}},{"address":"module.argocd.kubectl_manifest.argocd_admin_secret_patch","mode":"managed","type":"kubectl_manifest","name":"argocd_admin_secret_patch","provider_name":"registry.terraform.io/gavinbunney/kubectl","schema_version":1,"values":{"apply_only":false,"force_conflicts":false,"force_new":false,"ignore_fields":null,"override_namespace":null,"sensitive_fields":null,"server_side_apply":false,"timeouts":null,"validate_schema":true,"wait":null,"wait_for_rollout":true},"sensitive_values":{"live_manifest_incluster":true,"yaml_body":true,"yaml_incluster":true}},{"address":"module.argocd.kubectl_manifest.argocd_application","mode":"managed","type":"kubectl_manifest","name":"argocd_application","provider_name":"registry.terraform.io/gavinbunney/kubectl","schema_version":1,"values":{"api_version":"argoproj.io/v1alpha1","apply_only":false,"force_conflicts":false,"force_new":false,"ignore_fields":null,"kind":"Application","name":"my-app","namespace":"argocd","override_namespace":null,"sensitive_fields":null,"server_side_apply":false,"timeouts":null,"validate_schema":true,"wait":null,"wait_for_rollout":true,"yaml_body":"apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: my-app\n  namespace: argocd\nspec:\n  project: default\n  source:\n    repoURL: \"https://github.com/JustZing/Helm-Argocd\"\n    targetRevision: \"main\"\n    path: \"manifest\"\n  destination:\n    server: https://kubernetes.default.svc\n    namespace: \"argocd\"\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: true\n    syncOptions:\n      - CreateNamespace=true\n","yaml_body_parsed":"apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: my-app\n  namespace: argocd\nspec:\n  destination:\n    namespace: argocd\n    server: https://kubernetes.default.svc\n  project: default\n  source:\n    path: manifest\n    repoURL: https://github.com/JustZing/Helm-Argocd\n    targetRevision: main\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: true\n    syncOptions:\n    - CreateNamespace=true\n"},"sensitive_values":{"live_manifest_incluster":true,"yaml_body":true,"yaml_incluster":true}},{"address":"module.argocd.kubectl_manifest.argocd_cm_patch","mode":"managed","type":"kubectl_manifest","name":"argocd_cm_patch","provider_name":"registry.terraform.io/gavinbunney/kubectl","schema_version":1,"values":{"api_version":"v1","apply_only":false,"force_conflicts":false,"force_new":false,"ignore_fields":null,"kind":"ConfigMap","name":"argocd-cm","namespace":"argocd","override_namespace":null,"sensitive_fields":null,"server_side_apply":false,"timeouts":null,"validate_schema":true,"wait":null,"wait_for_rollout":true,"yaml_body":"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: argocd-cm\n  namespace: argocd\ndata:\n  url: \"https://argocd.example.com\"\n  oidc.config: |\n    name: GitHub\n    issuer: https://token.actions.githubusercontent.com\n    clientID: \"Ov23lidHMqWOQtMCQFxC\"\n    clientSecret: \"c21e13763a4101710c531a9ca4294d85040361e1\"\n    requestedScopes: [\"openid\", \"profile\", \"email\"]\n","yaml_body_parsed":"apiVersion: v1\ndata:\n  oidc.config: |\n    name: GitHub\n    issuer: https://token.actions.githubusercontent.com\n    clientID: \"Ov23lidHMqWOQtMCQFxC\"\n    clientSecret: \"c21e13763a4101710c531a9ca4294d85040361e1\"\n    requestedScopes: [\"openid\", \"profile\", \"email\"]\n  url: https://argocd.example.com\nkind: ConfigMap\nmetadata:\n  name: argocd-cm\n  namespace: argocd\n"},"sensitive_values":{"live_manifest_incluster":true,"yaml_body":true,"yaml_incluster":true}}],"address":"module.argocd"},{"resources":[{"address":"module.eks.aws_eks_cluster.eks_cluster","mode":"managed","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"bootstrap_self_managed_addons":true,"enabled_cluster_log_types":["api","audit","authenticator","controllerManager","scheduler"],"encryption_config":[],"name":"awsinfra-eks-cluster","outpost_config":[],"tags":null,"timeouts":null,"vpc_config":[{"endpoint_private_access":true,"endpoint_public_access":true,"security_group_ids":null}]},"sensitive_values":{"access_config":[],"certificate_authority":[],"enabled_cluster_log_types":[false,false,false,false,false],"encryption_config":[],"identity":[],"kubernetes_network_config":[],"outpost_config":[],"tags_all":{},"upgrade_policy":[],"vpc_config":[{"public_access_cidrs":[],"subnet_ids":[]}]}},{"address":"module.eks.aws_eks_node_group.eks_nodes","mode":"managed","type":"aws_eks_node_group","name":"eks_nodes","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cluster_name":"awsinfra-eks-cluster","force_update_version":null,"instance_types":["t3.medium"],"labels":null,"launch_template":[],"node_group_name":"awsinfra-node-group","remote_access":[{"ec2_ssh_key":"","source_security_group_ids":null}],"scaling_config":[{"desired_size":2,"max_size":3,"min_size":1}],"tags":null,"taint":[],"timeouts":null},"sensitive_values":{"instance_types":[false],"launch_template":[],"remote_access":[{}],"resources":[],"scaling_config":[{}],"subnet_ids":[],"tags_all":{},"taint":[],"update_config":[]}},{"address":"module.eks.aws_eks_node_group.worker_nodes","mode":"managed","type":"aws_eks_node_group","name":"worker_nodes","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cluster_name":"awsinfra-eks-cluster","force_update_version":null,"labels":null,"launch_template":[],"node_group_name":"awsinfra-worker-nodes","remote_access":[],"scaling_config":[{"desired_size":2,"max_size":3,"min_size":1}],"tags":null,"taint":[],"timeouts":null},"sensitive_values":{"instance_types":[],"launch_template":[],"remote_access":[],"resources":[],"scaling_config":[{}],"subnet_ids":[],"tags_all":{},"taint":[],"update_config":[]}},{"address":"module.eks.aws_iam_openid_connect_provider.oidc_provider","mode":"managed","type":"aws_iam_openid_connect_provider","name":"oidc_provider","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"client_id_list":["sts.amazonaws.com"],"tags":null,"thumbprint_list":["9e99a48a9960b14926bb7f3b02e22da0ecd1b32a"]},"sensitive_values":{"client_id_list":[false],"tags_all":{},"thumbprint_list":[false]}},{"address":"module.eks.aws_iam_role.eks_cluster_role","mode":"managed","type":"aws_iam_role","name":"eks_cluster_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"eks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"awsinfra-eks-cluster-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.eks.aws_iam_role.eks_node_role","mode":"managed","type":"aws_iam_role","name":"eks_node_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"awsinfra-eks-node-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.eks.aws_iam_role.worker_nodes_role","mode":"managed","type":"aws_iam_role","name":"worker_nodes_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"awsinfra-worker-nodes-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.eks.aws_iam_role_policy_attachment.eks_cluster_AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_cluster_AmazonEKSClusterPolicy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"awsinfra-eks-cluster-role"},"sensitive_values":{}},{"address":"module.eks.aws_iam_role_policy_attachment.eks_worker_node_policies[\"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_worker_node_policies","index":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","role":"awsinfra-eks-node-role"},"sensitive_values":{}},{"address":"module.eks.aws_iam_role_policy_attachment.eks_worker_node_policies[\"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_worker_node_policies","index":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","role":"awsinfra-eks-node-role"},"sensitive_values":{}},{"address":"module.eks.aws_iam_role_policy_attachment.eks_worker_node_policies[\"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_worker_node_policies","index":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","role":"awsinfra-eks-node-role"},"sensitive_values":{}},{"address":"module.eks.aws_iam_role_policy_attachment.worker_nodes_AmazonEC2ContainerRegistryReadOnly","mode":"managed","type":"aws_iam_role_policy_attachment","name":"worker_nodes_AmazonEC2ContainerRegistryReadOnly","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","role":"awsinfra-worker-nodes-role"},"sensitive_values":{}},{"address":"module.eks.aws_iam_role_policy_attachment.worker_nodes_AmazonEKSWorkerNodePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"worker_nodes_AmazonEKSWorkerNodePolicy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","role":"awsinfra-worker-nodes-role"},"sensitive_values":{}},{"address":"module.eks.aws_iam_role_policy_attachment.worker_nodes_AmazonEKS_CNI_Policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"worker_nodes_AmazonEKS_CNI_Policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","role":"awsinfra-worker-nodes-role"},"sensitive_values":{}}],"address":"module.eks"},{"resources":[{"address":"module.iam.aws_iam_policy.custom_policy","mode":"managed","type":"aws_iam_policy","name":"custom_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"name":"springapp-argo-access","path":"/","policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRoleWithWebIdentity\",\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.iam.aws_iam_role.argo_service_account_role","mode":"managed","type":"aws_iam_role","name":"argo_service_account_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"springapp-argo-sa-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.iam.aws_iam_role_policy_attachment.argo_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"argo_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"springapp-argo-sa-role"},"sensitive_values":{}},{"address":"module.iam.data.aws_iam_policy_document.oidc_assume_policy","mode":"data","type":"aws_iam_policy_document","name":"oidc_assume_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRoleWithWebIdentity"],"condition":[{"test":"StringEquals","values":["system:serviceaccount:argocd:argocd-sa"]}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":[null],"type":"Federated"}],"resources":null,"sid":null}],"version":null},"sensitive_values":{"statement":[{"actions":[false],"condition":[{"values":[false]}],"not_principals":[],"principals":[{"identifiers":[false]}]}]}}],"address":"module.iam"},{"resources":[{"address":"module.monitoring.helm_release.kube_prometheus_stack","mode":"managed","type":"helm_release","name":"kube_prometheus_stack","provider_name":"registry.terraform.io/hashicorp/helm","schema_version":1,"values":{"atomic":false,"chart":"kube-prometheus-stack","cleanup_on_fail":false,"create_namespace":true,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":null,"lint":false,"max_history":0,"name":"kube-prometheus-stack","namespace":"monitoring","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://prometheus-community.github.io/helm-charts","repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[],"set_list":[],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"upgrade_install":null,"values":["\"alertmanager\":\n  \"alertmanagerSpec\":\n    \"storage\":\n      \"volumeClaimTemplate\":\n        \"spec\":\n          \"accessModes\":\n          - \"ReadWriteOnce\"\n          \"resources\":\n            \"requests\":\n              \"storage\": \"5Gi\"\n\"grafana\":\n  \"adminPassword\": \"/DxTYa37q0FeEr+60ThaWw==\"\n\"prometheus\":\n  \"prometheusSpec\":\n    \"storageSpec\":\n      \"volumeClaimTemplate\":\n        \"spec\":\n          \"accessModes\":\n          - \"ReadWriteOnce\"\n          \"resources\":\n            \"requests\":\n              \"storage\": \"10Gi\"\n"],"verify":false,"version":"45.5.0","wait":true,"wait_for_jobs":false},"sensitive_values":{"metadata":[],"postrender":[],"repository_password":true,"set":[],"set_list":[],"set_sensitive":[],"values":[true]}}],"address":"module.monitoring"},{"resources":[{"address":"module.natgateway.aws_eip.eip_for_nat_gateway_az1","mode":"managed","type":"aws_eip","name":"eip_for_nat_gateway_az1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Name":"nat gateway az1 eip"},"tags_all":{"Name":"nat gateway az1 eip"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.natgateway.aws_eip.eip_for_nat_gateway_az2","mode":"managed","type":"aws_eip","name":"eip_for_nat_gateway_az2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Name":"nat gateway az2 eip"},"tags_all":{"Name":"nat gateway az2 eip"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.natgateway.aws_nat_gateway.nat_gateway_az1","mode":"managed","type":"aws_nat_gateway","name":"nat_gateway_az1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"nat gateway az1"},"tags_all":{"Name":"nat gateway az1"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.natgateway.aws_nat_gateway.nat_gateway_az2","mode":"managed","type":"aws_nat_gateway","name":"nat_gateway_az2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"nat gateway az2"},"tags_all":{"Name":"nat gateway az2"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.natgateway.aws_route_table.private_route_table_az1","mode":"managed","type":"aws_route_table","name":"private_route_table_az1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"private route table az1"},"tags_all":{"Name":"private route table az1"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.natgateway.aws_route_table.private_route_table_az2","mode":"managed","type":"aws_route_table","name":"private_route_table_az2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"private route table az2"},"tags_all":{"Name":"private route table az2"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.natgateway.aws_route_table_association.private_subnet_az1_route_table_az1_association","mode":"managed","type":"aws_route_table_association","name":"private_subnet_az1_route_table_az1_association","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.natgateway.aws_route_table_association.private_subnet_az2_route_table_az2_association","mode":"managed","type":"aws_route_table_association","name":"private_subnet_az2_route_table_az2_association","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}}],"address":"module.natgateway"},{"resources":[{"address":"module.rds.aws_db_instance.db_instance","mode":"managed","type":"aws_db_instance","name":"db_instance","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":false,"auto_minor_version_upgrade":true,"availability_zone":"us-east-1a","blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_name":"petclinic","db_subnet_group_name":"db-secure-subnets","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":null,"engine":"mysql","engine_version":"8.0.35","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"petclinic","instance_class":"db.t3.micro","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"password":"petclinic","performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"storage_encrypted":null,"tags":{"Name":"petclinic-rds"},"tags_all":{"Name":"petclinic-rds"},"timeouts":null,"upgrade_storage_config":null,"username":"petclinic"},"sensitive_values":{"blue_green_update":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"username":true,"vpc_security_group_ids":[]}},{"address":"module.rds.aws_db_subnet_group.database_subnet_group","mode":"managed","type":"aws_db_subnet_group","name":"database_subnet_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Subnet group for RDS in secure/private subnets","name":"db-secure-subnets","tags":{"Name":"db-secure-subnets"},"tags_all":{"Name":"db-secure-subnets"}},"sensitive_values":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}},{"address":"module.rds.aws_security_group.database_security_group","mode":"managed","type":"aws_security_group","name":"database_security_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Allow MySQL access from EKS node group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow MySQL from EKS nodes","from_port":3306,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":3306}],"name":"rds-security-group","revoke_rules_on_delete":false,"tags":{"Name":"rds-security-group"},"tags_all":{"Name":"rds-security-group"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.rds"},{"resources":[{"address":"module.security_group.aws_security_group.alb_sg","mode":"managed","type":"aws_security_group","name":"alb_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for ALB","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow HTTP","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"Allow HTTPS","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"springapp-alb-sg","revoke_rules_on_delete":false,"tags":{"Name":"springapp-alb-sg"},"tags_all":{"Name":"springapp-alb-sg"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.security_group.aws_security_group.eks_node_sg","mode":"managed","type":"aws_security_group","name":"eks_node_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"EKS worker node SG","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow traffic from ALB","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":65535}],"name":"springapp-eks-node-sg","revoke_rules_on_delete":false,"tags":{"Name":"springapp-eks-node-sg"},"tags_all":{"Name":"springapp-eks-node-sg"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.security_group.aws_security_group.rds_sg","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"RDS DB SG","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow DB access from EKS nodes","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":5432}],"name":"springapp-rds-sg","revoke_rules_on_delete":false,"tags":{"Name":"springapp-rds-sg"},"tags_all":{"Name":"springapp-rds-sg"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.security_group"},{"resources":[{"address":"module.vpc.aws_eip.nat_eip","mode":"managed","type":"aws_eip","name":"nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Name":"awsinfra-nat-eip"},"tags_all":{"Name":"awsinfra-nat-eip"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_internet_gateway.internet_gateway","mode":"managed","type":"aws_internet_gateway","name":"internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"awsinfra-igw"},"tags_all":{"Name":"awsinfra-igw"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_nat_gateway.nat_gateway","mode":"managed","type":"aws_nat_gateway","name":"nat_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"awsinfra-nat-gateway"},"tags_all":{"Name":"awsinfra-nat-gateway"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.private_route_table","mode":"managed","type":"aws_route_table","name":"private_route_table","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"private route table"},"tags_all":{"Name":"private route table"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.public_route_table","mode":"managed","type":"aws_route_table","name":"public_route_table","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"public route table"},"tags_all":{"Name":"public route table"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table_association.public_subnet_az1_assoc","mode":"managed","type":"aws_route_table_association","name":"public_subnet_az1_assoc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.public_subnet_az2_assoc","mode":"managed","type":"aws_route_table_association","name":"public_subnet_az2_assoc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.secure_subnet_az1_assoc","mode":"managed","type":"aws_route_table_association","name":"secure_subnet_az1_assoc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.secure_subnet_az2_assoc","mode":"managed","type":"aws_route_table_association","name":"secure_subnet_az2_assoc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_subnet.private_subnet_az1","mode":"managed","type":"aws_subnet","name":"private_subnet_az1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"172.16.128.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"private subnet az1"},"tags_all":{"Name":"private subnet az1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.private_subnet_az2","mode":"managed","type":"aws_subnet","name":"private_subnet_az2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"172.16.144.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"private subnet az2"},"tags_all":{"Name":"private subnet az2"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public_subnet_az1","mode":"managed","type":"aws_subnet","name":"public_subnet_az1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"172.16.0.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"public subnet az1"},"tags_all":{"Name":"public subnet az1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public_subnet_az2","mode":"managed","type":"aws_subnet","name":"public_subnet_az2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"172.16.16.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"public subnet az2"},"tags_all":{"Name":"public subnet az2"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.secure_subnet_az1","mode":"managed","type":"aws_subnet","name":"secure_subnet_az1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"172.16.160.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"secure subnet az1"},"tags_all":{"Name":"secure subnet az1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.secure_subnet_az2","mode":"managed","type":"aws_subnet","name":"secure_subnet_az2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"172.16.176.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"secure subnet az2"},"tags_all":{"Name":"secure subnet az2"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_vpc.infra","mode":"managed","type":"aws_vpc","name":"infra","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"172.16.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"awsinfra-vpc"},"tags_all":{"Name":"awsinfra-vpc"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.vpc"}]}},"resource_changes":[{"address":"module.alb_controller.helm_release.aws_lb_controller","module_address":"module.alb_controller","mode":"managed","type":"helm_release","name":"aws_lb_controller","provider_name":"registry.terraform.io/hashicorp/helm","change":{"actions":["create"],"before":null,"after":{"atomic":false,"chart":"aws-load-balancer-controller","cleanup_on_fail":false,"create_namespace":true,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":null,"lint":false,"max_history":0,"name":"aws-load-balancer-controller","namespace":"kube-system","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://aws.github.io/eks-charts","repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[{"name":"clusterName","type":"","value":"awsinfra-eks-cluster"},{"name":"region","type":"","value":"us-east-1"},{"name":"serviceAccount.create","type":"","value":"false"},{"name":"serviceAccount.name","type":"","value":"aws-load-balancer-controller"},{"name":"vpcId","type":""}],"set_list":[],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"upgrade_install":null,"values":null,"verify":false,"version":"1.7.3","wait":true,"wait_for_jobs":false},"after_unknown":{"id":true,"manifest":true,"metadata":true,"postrender":[],"set":[{},{},{},{},{"value":true}],"set_list":[],"set_sensitive":[]},"before_sensitive":false,"after_sensitive":{"metadata":[],"postrender":[],"repository_password":true,"set":[{},{},{},{},{}],"set_list":[],"set_sensitive":[]}}},{"address":"module.argocd.helm_release.argocd","module_address":"module.argocd","mode":"managed","type":"helm_release","name":"argocd","provider_name":"registry.terraform.io/hashicorp/helm","change":{"actions":["create"],"before":null,"after":{"atomic":false,"chart":"argo-cd","cleanup_on_fail":false,"create_namespace":true,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":null,"lint":false,"max_history":0,"name":"argocd","namespace":"argocd","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://argoproj.github.io/argo-helm","repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[{"name":"server.extraArgs","type":"","value":"--insecure"}],"set_list":[],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"upgrade_install":null,"values":null,"verify":false,"version":"8.1.2","wait":true,"wait_for_jobs":false},"after_unknown":{"id":true,"manifest":true,"metadata":true,"postrender":[],"set":[{}],"set_list":[],"set_sensitive":[]},"before_sensitive":false,"after_sensitive":{"metadata":[],"postrender":[],"repository_password":true,"set":[{}],"set_list":[],"set_sensitive":[]}}},{"address":"module.argocd.kubectl_manifest.argocd_admin_secret_patch","module_address":"module.argocd","mode":"managed","type":"kubectl_manifest","name":"argocd_admin_secret_patch","provider_name":"registry.terraform.io/gavinbunney/kubectl","change":{"actions":["create"],"before":null,"after":{"apply_only":false,"force_conflicts":false,"force_new":false,"ignore_fields":null,"override_namespace":null,"sensitive_fields":null,"server_side_apply":false,"timeouts":null,"validate_schema":true,"wait":null,"wait_for_rollout":true},"after_unknown":{"api_version":true,"id":true,"kind":true,"live_manifest_incluster":true,"live_uid":true,"name":true,"namespace":true,"uid":true,"yaml_body":true,"yaml_body_parsed":true,"yaml_incluster":true},"before_sensitive":false,"after_sensitive":{"live_manifest_incluster":true,"yaml_body":true,"yaml_incluster":true}}},{"address":"module.argocd.kubectl_manifest.argocd_application","module_address":"module.argocd","mode":"managed","type":"kubectl_manifest","name":"argocd_application","provider_name":"registry.terraform.io/gavinbunney/kubectl","change":{"actions":["create"],"before":null,"after":{"api_version":"argoproj.io/v1alpha1","apply_only":false,"force_conflicts":false,"force_new":false,"ignore_fields":null,"kind":"Application","name":"my-app","namespace":"argocd","override_namespace":null,"sensitive_fields":null,"server_side_apply":false,"timeouts":null,"validate_schema":true,"wait":null,"wait_for_rollout":true,"yaml_body":"apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: my-app\n  namespace: argocd\nspec:\n  project: default\n  source:\n    repoURL: \"https://github.com/JustZing/Helm-Argocd\"\n    targetRevision: \"main\"\n    path: \"manifest\"\n  destination:\n    server: https://kubernetes.default.svc\n    namespace: \"argocd\"\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: true\n    syncOptions:\n      - CreateNamespace=true\n","yaml_body_parsed":"apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: my-app\n  namespace: argocd\nspec:\n  destination:\n    namespace: argocd\n    server: https://kubernetes.default.svc\n  project: default\n  source:\n    path: manifest\n    repoURL: https://github.com/JustZing/Helm-Argocd\n    targetRevision: main\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: true\n    syncOptions:\n    - CreateNamespace=true\n"},"after_unknown":{"id":true,"live_manifest_incluster":true,"live_uid":true,"uid":true,"yaml_incluster":true},"before_sensitive":false,"after_sensitive":{"live_manifest_incluster":true,"yaml_body":true,"yaml_incluster":true}}},{"address":"module.argocd.kubectl_manifest.argocd_cm_patch","module_address":"module.argocd","mode":"managed","type":"kubectl_manifest","name":"argocd_cm_patch","provider_name":"registry.terraform.io/gavinbunney/kubectl","change":{"actions":["create"],"before":null,"after":{"api_version":"v1","apply_only":false,"force_conflicts":false,"force_new":false,"ignore_fields":null,"kind":"ConfigMap","name":"argocd-cm","namespace":"argocd","override_namespace":null,"sensitive_fields":null,"server_side_apply":false,"timeouts":null,"validate_schema":true,"wait":null,"wait_for_rollout":true,"yaml_body":"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: argocd-cm\n  namespace: argocd\ndata:\n  url: \"https://argocd.example.com\"\n  oidc.config: |\n    name: GitHub\n    issuer: https://token.actions.githubusercontent.com\n    clientID: \"Ov23lidHMqWOQtMCQFxC\"\n    clientSecret: \"c21e13763a4101710c531a9ca4294d85040361e1\"\n    requestedScopes: [\"openid\", \"profile\", \"email\"]\n","yaml_body_parsed":"apiVersion: v1\ndata:\n  oidc.config: |\n    name: GitHub\n    issuer: https://token.actions.githubusercontent.com\n    clientID: \"Ov23lidHMqWOQtMCQFxC\"\n    clientSecret: \"c21e13763a4101710c531a9ca4294d85040361e1\"\n    requestedScopes: [\"openid\", \"profile\", \"email\"]\n  url: https://argocd.example.com\nkind: ConfigMap\nmetadata:\n  name: argocd-cm\n  namespace: argocd\n"},"after_unknown":{"id":true,"live_manifest_incluster":true,"live_uid":true,"uid":true,"yaml_incluster":true},"before_sensitive":false,"after_sensitive":{"live_manifest_incluster":true,"yaml_body":true,"yaml_incluster":true}}},{"address":"module.eks.aws_eks_cluster.eks_cluster","module_address":"module.eks","mode":"managed","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bootstrap_self_managed_addons":true,"enabled_cluster_log_types":["api","audit","authenticator","controllerManager","scheduler"],"encryption_config":[],"name":"awsinfra-eks-cluster","outpost_config":[],"tags":null,"timeouts":null,"vpc_config":[{"endpoint_private_access":true,"endpoint_public_access":true,"security_group_ids":null}]},"after_unknown":{"access_config":true,"arn":true,"certificate_authority":true,"cluster_id":true,"created_at":true,"enabled_cluster_log_types":[false,false,false,false,false],"encryption_config":[],"endpoint":true,"id":true,"identity":true,"kubernetes_network_config":true,"outpost_config":[],"platform_version":true,"role_arn":true,"status":true,"tags_all":true,"upgrade_policy":true,"version":true,"vpc_config":[{"cluster_security_group_id":true,"public_access_cidrs":true,"subnet_ids":true,"vpc_id":true}]},"before_sensitive":false,"after_sensitive":{"access_config":[],"certificate_authority":[],"enabled_cluster_log_types":[false,false,false,false,false],"encryption_config":[],"identity":[],"kubernetes_network_config":[],"outpost_config":[],"tags_all":{},"upgrade_policy":[],"vpc_config":[{"public_access_cidrs":[],"subnet_ids":[]}]}}},{"address":"module.eks.aws_eks_node_group.eks_nodes","module_address":"module.eks","mode":"managed","type":"aws_eks_node_group","name":"eks_nodes","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cluster_name":"awsinfra-eks-cluster","force_update_version":null,"instance_types":["t3.medium"],"labels":null,"launch_template":[],"node_group_name":"awsinfra-node-group","remote_access":[{"ec2_ssh_key":"","source_security_group_ids":null}],"scaling_config":[{"desired_size":2,"max_size":3,"min_size":1}],"tags":null,"taint":[],"timeouts":null},"after_unknown":{"ami_type":true,"arn":true,"capacity_type":true,"disk_size":true,"id":true,"instance_types":[false],"launch_template":[],"node_group_name_prefix":true,"node_role_arn":true,"release_version":true,"remote_access":[{}],"resources":true,"scaling_config":[{}],"status":true,"subnet_ids":true,"tags_all":true,"taint":[],"update_config":true,"version":true},"before_sensitive":false,"after_sensitive":{"instance_types":[false],"launch_template":[],"remote_access":[{}],"resources":[],"scaling_config":[{}],"subnet_ids":[],"tags_all":{},"taint":[],"update_config":[]}}},{"address":"module.eks.aws_eks_node_group.worker_nodes","module_address":"module.eks","mode":"managed","type":"aws_eks_node_group","name":"worker_nodes","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cluster_name":"awsinfra-eks-cluster","force_update_version":null,"labels":null,"launch_template":[],"node_group_name":"awsinfra-worker-nodes","remote_access":[],"scaling_config":[{"desired_size":2,"max_size":3,"min_size":1}],"tags":null,"taint":[],"timeouts":null},"after_unknown":{"ami_type":true,"arn":true,"capacity_type":true,"disk_size":true,"id":true,"instance_types":true,"launch_template":[],"node_group_name_prefix":true,"node_role_arn":true,"release_version":true,"remote_access":[],"resources":true,"scaling_config":[{}],"status":true,"subnet_ids":true,"tags_all":true,"taint":[],"update_config":true,"version":true},"before_sensitive":false,"after_sensitive":{"instance_types":[],"launch_template":[],"remote_access":[],"resources":[],"scaling_config":[{}],"subnet_ids":[],"tags_all":{},"taint":[],"update_config":[]}}},{"address":"module.eks.aws_iam_openid_connect_provider.oidc_provider","module_address":"module.eks","mode":"managed","type":"aws_iam_openid_connect_provider","name":"oidc_provider","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"client_id_list":["sts.amazonaws.com"],"tags":null,"thumbprint_list":["9e99a48a9960b14926bb7f3b02e22da0ecd1b32a"]},"after_unknown":{"arn":true,"client_id_list":[false],"id":true,"tags_all":true,"thumbprint_list":[false],"url":true},"before_sensitive":false,"after_sensitive":{"client_id_list":[false],"tags_all":{},"thumbprint_list":[false]}}},{"address":"module.eks.aws_iam_role.eks_cluster_role","module_address":"module.eks","mode":"managed","type":"aws_iam_role","name":"eks_cluster_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"eks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"awsinfra-eks-cluster-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.eks.aws_iam_role.eks_node_role","module_address":"module.eks","mode":"managed","type":"aws_iam_role","name":"eks_node_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"awsinfra-eks-node-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.eks.aws_iam_role.worker_nodes_role","module_address":"module.eks","mode":"managed","type":"aws_iam_role","name":"worker_nodes_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"awsinfra-worker-nodes-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.eks.aws_iam_role_policy_attachment.eks_cluster_AmazonEKSClusterPolicy","module_address":"module.eks","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_cluster_AmazonEKSClusterPolicy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"awsinfra-eks-cluster-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks.aws_iam_role_policy_attachment.eks_worker_node_policies[\"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly\"]","module_address":"module.eks","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_worker_node_policies","index":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","role":"awsinfra-eks-node-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks.aws_iam_role_policy_attachment.eks_worker_node_policies[\"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy\"]","module_address":"module.eks","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_worker_node_policies","index":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","role":"awsinfra-eks-node-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks.aws_iam_role_policy_attachment.eks_worker_node_policies[\"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy\"]","module_address":"module.eks","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_worker_node_policies","index":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","role":"awsinfra-eks-node-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks.aws_iam_role_policy_attachment.worker_nodes_AmazonEC2ContainerRegistryReadOnly","module_address":"module.eks","mode":"managed","type":"aws_iam_role_policy_attachment","name":"worker_nodes_AmazonEC2ContainerRegistryReadOnly","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","role":"awsinfra-worker-nodes-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks.aws_iam_role_policy_attachment.worker_nodes_AmazonEKSWorkerNodePolicy","module_address":"module.eks","mode":"managed","type":"aws_iam_role_policy_attachment","name":"worker_nodes_AmazonEKSWorkerNodePolicy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","role":"awsinfra-worker-nodes-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks.aws_iam_role_policy_attachment.worker_nodes_AmazonEKS_CNI_Policy","module_address":"module.eks","mode":"managed","type":"aws_iam_role_policy_attachment","name":"worker_nodes_AmazonEKS_CNI_Policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","role":"awsinfra-worker-nodes-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam.data.aws_iam_policy_document.oidc_assume_policy","module_address":"module.iam","mode":"data","type":"aws_iam_policy_document","name":"oidc_assume_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRoleWithWebIdentity"],"condition":[{"test":"StringEquals","values":["system:serviceaccount:argocd:argocd-sa"]}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":[null],"type":"Federated"}],"resources":null,"sid":null}],"version":null},"after_unknown":{"id":true,"json":true,"minified_json":true,"statement":[{"actions":[false],"condition":[{"values":[false],"variable":true}],"not_principals":[],"principals":[{"identifiers":[true]}]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false],"condition":[{"values":[false]}],"not_principals":[],"principals":[{"identifiers":[false]}]}]}},"action_reason":"read_because_config_unknown"},{"address":"module.iam.aws_iam_policy.custom_policy","module_address":"module.iam","mode":"managed","type":"aws_iam_policy","name":"custom_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"name":"springapp-argo-access","path":"/","policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRoleWithWebIdentity\",\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","tags":null},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.iam.aws_iam_role.argo_service_account_role","module_address":"module.iam","mode":"managed","type":"aws_iam_role","name":"argo_service_account_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"springapp-argo-sa-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"assume_role_policy":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.iam.aws_iam_role_policy_attachment.argo_attach","module_address":"module.iam","mode":"managed","type":"aws_iam_role_policy_attachment","name":"argo_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"springapp-argo-sa-role"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.monitoring.helm_release.kube_prometheus_stack","module_address":"module.monitoring","mode":"managed","type":"helm_release","name":"kube_prometheus_stack","provider_name":"registry.terraform.io/hashicorp/helm","change":{"actions":["create"],"before":null,"after":{"atomic":false,"chart":"kube-prometheus-stack","cleanup_on_fail":false,"create_namespace":true,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":null,"lint":false,"max_history":0,"name":"kube-prometheus-stack","namespace":"monitoring","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://prometheus-community.github.io/helm-charts","repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[],"set_list":[],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"upgrade_install":null,"values":["\"alertmanager\":\n  \"alertmanagerSpec\":\n    \"storage\":\n      \"volumeClaimTemplate\":\n        \"spec\":\n          \"accessModes\":\n          - \"ReadWriteOnce\"\n          \"resources\":\n            \"requests\":\n              \"storage\": \"5Gi\"\n\"grafana\":\n  \"adminPassword\": \"/DxTYa37q0FeEr+60ThaWw==\"\n\"prometheus\":\n  \"prometheusSpec\":\n    \"storageSpec\":\n      \"volumeClaimTemplate\":\n        \"spec\":\n          \"accessModes\":\n          - \"ReadWriteOnce\"\n          \"resources\":\n            \"requests\":\n              \"storage\": \"10Gi\"\n"],"verify":false,"version":"45.5.0","wait":true,"wait_for_jobs":false},"after_unknown":{"id":true,"manifest":true,"metadata":true,"postrender":[],"set":[],"set_list":[],"set_sensitive":[],"values":[false]},"before_sensitive":false,"after_sensitive":{"metadata":[],"postrender":[],"repository_password":true,"set":[],"set_list":[],"set_sensitive":[],"values":[true]}}},{"address":"module.natgateway.aws_eip.eip_for_nat_gateway_az1","module_address":"module.natgateway","mode":"managed","type":"aws_eip","name":"eip_for_nat_gateway_az1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Name":"nat gateway az1 eip"},"tags_all":{"Name":"nat gateway az1 eip"},"timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{},"vpc":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.natgateway.aws_eip.eip_for_nat_gateway_az2","module_address":"module.natgateway","mode":"managed","type":"aws_eip","name":"eip_for_nat_gateway_az2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Name":"nat gateway az2 eip"},"tags_all":{"Name":"nat gateway az2 eip"},"timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{},"vpc":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.natgateway.aws_nat_gateway.nat_gateway_az1","module_address":"module.natgateway","mode":"managed","type":"aws_nat_gateway","name":"nat_gateway_az1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"nat gateway az1"},"tags_all":{"Name":"nat gateway az1"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.natgateway.aws_nat_gateway.nat_gateway_az2","module_address":"module.natgateway","mode":"managed","type":"aws_nat_gateway","name":"nat_gateway_az2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"nat gateway az2"},"tags_all":{"Name":"nat gateway az2"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.natgateway.aws_route_table.private_route_table_az1","module_address":"module.natgateway","mode":"managed","type":"aws_route_table","name":"private_route_table_az1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"private route table az1"},"tags_all":{"Name":"private route table az1"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"nat_gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.natgateway.aws_route_table.private_route_table_az2","module_address":"module.natgateway","mode":"managed","type":"aws_route_table","name":"private_route_table_az2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"private route table az2"},"tags_all":{"Name":"private route table az2"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"nat_gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.natgateway.aws_route_table_association.private_subnet_az1_route_table_az1_association","module_address":"module.natgateway","mode":"managed","type":"aws_route_table_association","name":"private_subnet_az1_route_table_az1_association","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.natgateway.aws_route_table_association.private_subnet_az2_route_table_az2_association","module_address":"module.natgateway","mode":"managed","type":"aws_route_table_association","name":"private_subnet_az2_route_table_az2_association","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.rds.aws_db_instance.db_instance","module_address":"module.rds","mode":"managed","type":"aws_db_instance","name":"db_instance","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":false,"auto_minor_version_upgrade":true,"availability_zone":"us-east-1a","blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_name":"petclinic","db_subnet_group_name":"db-secure-subnets","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":null,"engine":"mysql","engine_version":"8.0.35","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"petclinic","instance_class":"db.t3.micro","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"password":"petclinic","performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"storage_encrypted":null,"tags":{"Name":"petclinic-rds"},"tags_all":{"Name":"petclinic-rds"},"timeouts":null,"upgrade_storage_config":null,"username":"petclinic"},"after_unknown":{"address":true,"arn":true,"backup_retention_period":true,"backup_target":true,"backup_window":true,"blue_green_update":[],"ca_cert_identifier":true,"character_set_name":true,"domain_fqdn":true,"endpoint":true,"engine_lifecycle_support":true,"engine_version_actual":true,"hosted_zone_id":true,"id":true,"identifier_prefix":true,"iops":true,"kms_key_id":true,"latest_restorable_time":true,"license_model":true,"listener_endpoint":true,"maintenance_window":true,"master_user_secret":true,"master_user_secret_kms_key_id":true,"monitoring_role_arn":true,"nchar_character_set_name":true,"network_type":true,"option_group_name":true,"parameter_group_name":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"replica_mode":true,"replicas":true,"resource_id":true,"restore_to_point_in_time":[],"s3_import":[],"snapshot_identifier":true,"status":true,"storage_throughput":true,"storage_type":true,"tags":{},"tags_all":{},"timezone":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"blue_green_update":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"username":true,"vpc_security_group_ids":[]}}},{"address":"module.rds.aws_db_subnet_group.database_subnet_group","module_address":"module.rds","mode":"managed","type":"aws_db_subnet_group","name":"database_subnet_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Subnet group for RDS in secure/private subnets","name":"db-secure-subnets","tags":{"Name":"db-secure-subnets"},"tags_all":{"Name":"db-secure-subnets"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":true,"supported_network_types":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_security_group.database_security_group","module_address":"module.rds","mode":"managed","type":"aws_security_group","name":"database_security_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow MySQL access from EKS node group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow MySQL from EKS nodes","from_port":3306,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":3306}],"name":"rds-security-group","revoke_rules_on_delete":false,"tags":{"Name":"rds-security-group"},"tags_all":{"Name":"rds-security-group"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.security_group.aws_security_group.alb_sg","module_address":"module.security_group","mode":"managed","type":"aws_security_group","name":"alb_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for ALB","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow HTTP","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"Allow HTTPS","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"springapp-alb-sg","revoke_rules_on_delete":false,"tags":{"Name":"springapp-alb-sg"},"tags_all":{"Name":"springapp-alb-sg"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.security_group.aws_security_group.eks_node_sg","module_address":"module.security_group","mode":"managed","type":"aws_security_group","name":"eks_node_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"EKS worker node SG","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow traffic from ALB","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":65535}],"name":"springapp-eks-node-sg","revoke_rules_on_delete":false,"tags":{"Name":"springapp-eks-node-sg"},"tags_all":{"Name":"springapp-eks-node-sg"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.security_group.aws_security_group.rds_sg","module_address":"module.security_group","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"RDS DB SG","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow DB access from EKS nodes","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":5432}],"name":"springapp-rds-sg","revoke_rules_on_delete":false,"tags":{"Name":"springapp-rds-sg"},"tags_all":{"Name":"springapp-rds-sg"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_eip.nat_eip","module_address":"module.vpc","mode":"managed","type":"aws_eip","name":"nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Name":"awsinfra-nat-eip"},"tags_all":{"Name":"awsinfra-nat-eip"},"timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{},"vpc":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_internet_gateway.internet_gateway","module_address":"module.vpc","mode":"managed","type":"aws_internet_gateway","name":"internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"awsinfra-igw"},"tags_all":{"Name":"awsinfra-igw"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_nat_gateway.nat_gateway","module_address":"module.vpc","mode":"managed","type":"aws_nat_gateway","name":"nat_gateway","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"awsinfra-nat-gateway"},"tags_all":{"Name":"awsinfra-nat-gateway"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.private_route_table","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"private_route_table","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"private route table"},"tags_all":{"Name":"private route table"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"nat_gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.public_route_table","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"public_route_table","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"public route table"},"tags_all":{"Name":"public route table"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table_association.public_subnet_az1_assoc","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public_subnet_az1_assoc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.public_subnet_az2_assoc","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public_subnet_az2_assoc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.secure_subnet_az1_assoc","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"secure_subnet_az1_assoc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.secure_subnet_az2_assoc","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"secure_subnet_az2_assoc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_subnet.private_subnet_az1","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private_subnet_az1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"172.16.128.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"private subnet az1"},"tags_all":{"Name":"private subnet az1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.private_subnet_az2","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private_subnet_az2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"172.16.144.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"private subnet az2"},"tags_all":{"Name":"private subnet az2"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public_subnet_az1","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public_subnet_az1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"172.16.0.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"public subnet az1"},"tags_all":{"Name":"public subnet az1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public_subnet_az2","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public_subnet_az2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"172.16.16.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"public subnet az2"},"tags_all":{"Name":"public subnet az2"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.secure_subnet_az1","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"secure_subnet_az1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"172.16.160.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"secure subnet az1"},"tags_all":{"Name":"secure subnet az1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.secure_subnet_az2","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"secure_subnet_az2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"172.16.176.0/20","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"secure subnet az2"},"tags_all":{"Name":"secure subnet az2"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_vpc.infra","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"infra","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"172.16.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"awsinfra-vpc"},"tags_all":{"Name":"awsinfra-vpc"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}}],"output_changes":{"rds":{"actions":["create"],"before":null,"after":{},"after_unknown":{"rds_db_endpoint":true,"rds_security_group_id":true},"before_sensitive":true,"after_sensitive":true},"security_group":{"actions":["create"],"before":null,"after":{},"after_unknown":{"alb_sg_id":true,"eks_node_sg_id":true,"rds_sg_id":true},"before_sensitive":false,"after_sensitive":false},"vpc":{"actions":["create"],"before":null,"after":{"project_name":"awsinfra","public_subnet_ids":[null,null],"region":"us-east-1"},"after_unknown":{"internet_gateway":true,"private_subnet_az1_id":true,"private_subnet_az2_id":true,"public_subnet_az1_id":true,"public_subnet_az2_id":true,"public_subnet_ids":[true,true],"secure_subnet_az1_id":true,"secure_subnet_az2_id":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.11.4","values":{"root_module":{"resources":[{"address":"data.aws_ami.amazon_linux_2","mode":"data","type":"aws_ami","name":"amazon_linux_2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:us-east-1::image/ami-0c6ebb5b9bce4ba15","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-0c819b394123c6700","throughput":"0","volume_size":"8","volume_type":"gp2"},"no_device":"","virtual_name":""}],"boot_mode":"","creation_date":"2025-06-20T08:42:15.000Z","deprecation_time":"2025-09-18T08:42:00.000Z","description":"Amazon Linux 2 AMI 2.0.20250623.0 x86_64 HVM gp2","ena_support":true,"executable_users":null,"filter":[{"name":"name","values":["amzn2-ami-hvm*"]},{"name":"owner-alias","values":["amazon"]}],"hypervisor":"xen","id":"ami-0c6ebb5b9bce4ba15","image_id":"ami-0c6ebb5b9bce4ba15","image_location":"amazon/amzn2-ami-hvm-2.0.20250623.0-x86_64-gp2","image_owner_alias":"amazon","image_type":"machine","imds_support":"","include_deprecated":false,"kernel_id":"","most_recent":true,"name":"amzn2-ami-hvm-2.0.20250623.0-x86_64-gp2","name_regex":null,"owner_id":"137112412989","owners":["amazon"],"platform":"","platform_details":"Linux/UNIX","product_codes":[],"public":true,"ramdisk_id":"","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-0c819b394123c6700","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"timeouts":null,"tpm_support":"","usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}}],"filter":[{"values":[false]},{"values":[false]}],"owners":[false],"product_codes":[],"state_reason":{},"tags":{}}}],"child_modules":[{"resources":[{"address":"module.argocd.data.aws_secretsmanager_secret_version.admin_password","mode":"data","type":"aws_secretsmanager_secret_version","name":"admin_password","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:secretsmanager:us-east-1:354918380509:secret:argocd_admin_password_hash-jomnbH","created_date":"2025-06-30T20:12:53Z","id":"argocd_admin_password_hash|AWSCURRENT","secret_binary":"","secret_id":"argocd_admin_password_hash","secret_string":"{\n  \"admin_password_hash\": \"$2y$10$D4K7GijKXZfm1epdV71kDOfIAYWEauwLkiqmmU.3VcC4a4nyZ1j2G%\"\n}\n","version_id":"4c26bc3f-37a4-49fd-9bf9-fd1a2d857665","version_stage":"AWSCURRENT","version_stages":["AWSCURRENT"]},"sensitive_values":{"secret_binary":true,"secret_string":true,"version_stages":[false]}},{"address":"module.argocd.data.aws_secretsmanager_secret_version.github_oidc_credentials","mode":"data","type":"aws_secretsmanager_secret_version","name":"github_oidc_credentials","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:secretsmanager:us-east-1:354918380509:secret:springapp/github_oidc_v2-ME4a5I","created_date":"2025-07-01T00:56:24Z","id":"springapp/github_oidc_v2|AWSCURRENT","secret_binary":"","secret_id":"springapp/github_oidc_v2","secret_string":"{\n  \"github_oidc_client_id\": \"Ov23lidHMqWOQtMCQFxC\",\n  \"github_oidc_client_secret\": \"c21e13763a4101710c531a9ca4294d85040361e1\"\n}","version_id":"794f89a3-245a-498f-8a98-e71e0979cb15","version_stage":"AWSCURRENT","version_stages":["AWSCURRENT"]},"sensitive_values":{"secret_binary":true,"secret_string":true,"version_stages":[false]}}],"address":"module.argocd"},{"resources":[{"address":"module.eks.data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"354918380509","arn":"arn:aws:iam::354918380509:user/eks-admin","id":"354918380509","user_id":"AIDAVFIWIWPO243UBDP7K"},"sensitive_values":{}},{"address":"module.eks.data.aws_iam_policy_document.eks_assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"eks_assume_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"3552664922","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"eks.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"eks.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["eks.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"module.eks.data.aws_iam_policy_document.node_assume_role","mode":"data","type":"aws_iam_policy_document","name":"node_assume_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2851119427","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"module.eks.data.aws_iam_policy_document.worker_nodes_assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"worker_nodes_assume_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2851119427","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}}],"address":"module.eks"},{"resources":[{"address":"module.monitoring.data.aws_secretsmanager_secret_version.grafana_admin_password","mode":"data","type":"aws_secretsmanager_secret_version","name":"grafana_admin_password","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:secretsmanager:us-east-1:354918380509:secret:springapp/grafana/admin_password-0M1C54","created_date":"2025-06-30T19:09:17Z","id":"springapp/grafana/admin_password|AWSCURRENT","secret_binary":"","secret_id":"springapp/grafana/admin_password","secret_string":"{\"grafana_admin_password\":\"/DxTYa37q0FeEr+60ThaWw==\"}","version_id":"f45d97dd-6ca2-4564-a30d-4426534de0cf","version_stage":"AWSCURRENT","version_stages":["AWSCURRENT"]},"sensitive_values":{"secret_binary":true,"secret_string":true,"version_stages":[false]}}],"address":"module.monitoring"},{"resources":[{"address":"module.rds.data.aws_availability_zones.available_zones","mode":"data","type":"aws_availability_zones","name":"available_zones","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["us-east-1-zg-1"],"id":"us-east-1","names":["us-east-1a","us-east-1b","us-east-1c","us-east-1d","us-east-1e","us-east-1f"],"state":null,"timeouts":null,"zone_ids":["use1-az6","use1-az1","use1-az2","use1-az4","use1-az3","use1-az5"]},"sensitive_values":{"group_names":[false],"names":[false,false,false,false,false,false],"zone_ids":[false,false,false,false,false,false]}},{"address":"module.rds.data.aws_secretsmanager_secret_version.db_secret","mode":"data","type":"aws_secretsmanager_secret_version","name":"db_secret","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:secretsmanager:us-east-1:354918380509:secret:springapp/rds/credentials/v1-s5dhsD","created_date":"2025-06-30T18:16:09Z","id":"arn:aws:secretsmanager:us-east-1:354918380509:secret:springapp/rds/credentials/v1-s5dhsD|AWSCURRENT","secret_binary":"","secret_id":"arn:aws:secretsmanager:us-east-1:354918380509:secret:springapp/rds/credentials/v1-s5dhsD","secret_string":"{\n  \"mysql_user\": \"petclinic\",\n  \"mysql_password\": \"petclinic\"\n}","version_id":"c1fabe7e-f5da-4f02-8e53-0f409c047f11","version_stage":"AWSCURRENT","version_stages":["AWSCURRENT"]},"sensitive_values":{"secret_binary":true,"secret_string":true,"version_stages":[false]}}],"address":"module.rds"},{"resources":[{"address":"module.vpc.data.aws_availability_zones.available_zones","mode":"data","type":"aws_availability_zones","name":"available_zones","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["us-east-1-zg-1"],"id":"us-east-1","names":["us-east-1a","us-east-1b","us-east-1c","us-east-1d","us-east-1e","us-east-1f"],"state":null,"timeouts":null,"zone_ids":["use1-az6","use1-az1","use1-az2","use1-az4","use1-az3","use1-az5"]},"sensitive_values":{"group_names":[false],"names":[false,false,false,false,false,false],"zone_ids":[false,false,false,false,false,false]}}],"address":"module.vpc"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","expressions":{"region":{"references":["var.region"]}}},"module.alb_controller:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.alb_controller","expressions":{"kubernetes":[{"config_path":{"constant_value":"~/.kube/config"}}]}},"module.argocd:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 5.0","module_address":"module.argocd","expressions":{"region":{"references":["var.aws_region"]}}},"module.argocd:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"~\u003e 2.0","module_address":"module.argocd","expressions":{"kubernetes":[{"config_path":{"references":["var.kubeconfig_path"]}}]}},"module.argocd:kubectl":{"name":"kubectl","full_name":"registry.terraform.io/gavinbunney/kubectl","version_constraint":"~\u003e 1.14.0","module_address":"module.argocd","expressions":{"config_path":{"references":["var.kubeconfig_path"]}}},"module.monitoring:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.monitoring","expressions":{"kubernetes":[{"config_path":{"constant_value":"~/.kube/config"}}]}}},"root_module":{"outputs":{"rds":{"sensitive":true,"expression":{"references":["module.rds"]}},"security_group":{"expression":{"references":["module.security_group"]}},"vpc":{"expression":{"references":["module.vpc"]}}},"resources":[{"address":"data.aws_ami.amazon_linux_2","mode":"data","type":"aws_ami","name":"amazon_linux_2","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"owner-alias"},"values":{"constant_value":["amazon"]}},{"name":{"constant_value":"name"},"values":{"constant_value":["amzn2-ami-hvm*"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["amazon"]}},"schema_version":0}],"module_calls":{"alb_controller":{"source":"../modules/alb_controller","expressions":{"cluster_name":{"references":["module.eks.cluster_name","module.eks"]},"namespace":{"constant_value":"kube-system"},"region":{"references":["var.region"]},"service_account_name":{"constant_value":"aws-load-balancer-controller"},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"outputs":{"helm_release_name":{"expression":{"references":["helm_release.aws_lb_controller.name","helm_release.aws_lb_controller"]}}},"resources":[{"address":"helm_release.aws_lb_controller","mode":"managed","type":"helm_release","name":"aws_lb_controller","provider_config_key":"module.alb_controller:helm","expressions":{"chart":{"constant_value":"aws-load-balancer-controller"},"create_namespace":{"constant_value":true},"name":{"constant_value":"aws-load-balancer-controller"},"namespace":{"references":["var.namespace"]},"repository":{"constant_value":"https://aws.github.io/eks-charts"},"set":[{"name":{"constant_value":"clusterName"},"value":{"references":["var.cluster_name"]}},{"name":{"constant_value":"region"},"value":{"references":["var.region"]}},{"name":{"constant_value":"vpcId"},"value":{"references":["var.vpc_id"]}},{"name":{"constant_value":"serviceAccount.create"},"value":{"constant_value":"false"}},{"name":{"constant_value":"serviceAccount.name"},"value":{"references":["var.service_account_name"]}}],"version":{"constant_value":"1.7.3"}},"schema_version":1}],"variables":{"cluster_name":{"description":"EKS cluster name"},"namespace":{"default":"kube-system","description":"Namespace to install the ALB controller"},"region":{"description":"AWS region"},"service_account_name":{"default":"aws-load-balancer-controller","description":"Name of the Kubernetes ServiceAccount bound to the IAM role"},"vpc_id":{"description":"VPC ID where the EKS cluster lives"}}}},"argocd":{"source":"../modules/argocd","expressions":{"admin_password_secret_name":{"constant_value":"argocd_admin_password_hash"},"app_namespace":{"constant_value":"argocd"},"app_path":{"constant_value":"manifest"},"app_repo_branch":{"constant_value":"main"},"app_repo_url":{"constant_value":"https://github.com/JustZing/Helm-Argocd"},"argocd_app_name":{"constant_value":"my-app"},"argocd_url":{"constant_value":"https://argocd.example.com"},"aws_region":{"constant_value":"us-east-1"},"github_oidc_secret_name":{"constant_value":"springapp/github_oidc_v2"},"kubeconfig_path":{"constant_value":"~/.kube/config"}},"module":{"outputs":{"argocd_app_name":{"expression":{"references":["var.argocd_app_name"]},"description":"The name of the ArgoCD application"},"argocd_app_namespace":{"expression":{"references":["var.app_namespace"]},"description":"Kubernetes namespace where the ArgoCD-managed app is deployed"},"argocd_app_repo_url":{"expression":{"references":["var.app_repo_url"]},"description":"GitHub repository URL for the ArgoCD application"},"argocd_url":{"expression":{"references":["var.argocd_url"]},"description":"URL to access the ArgoCD UI"}},"resources":[{"address":"helm_release.argocd","mode":"managed","type":"helm_release","name":"argocd","provider_config_key":"module.argocd:helm","expressions":{"chart":{"constant_value":"argo-cd"},"create_namespace":{"constant_value":true},"name":{"constant_value":"argocd"},"namespace":{"constant_value":"argocd"},"repository":{"constant_value":"https://argoproj.github.io/argo-helm"},"set":[{"name":{"constant_value":"server.extraArgs"},"value":{"constant_value":"--insecure"}}]},"schema_version":1},{"address":"kubectl_manifest.argocd_admin_secret_patch","mode":"managed","type":"kubectl_manifest","name":"argocd_admin_secret_patch","provider_config_key":"module.argocd:kubectl","expressions":{"yaml_body":{"references":["data.aws_secretsmanager_secret_version.admin_password.secret_string","data.aws_secretsmanager_secret_version.admin_password"]}},"schema_version":1,"depends_on":["helm_release.argocd"]},{"address":"kubectl_manifest.argocd_application","mode":"managed","type":"kubectl_manifest","name":"argocd_application","provider_config_key":"module.argocd:kubectl","expressions":{"yaml_body":{"references":["var.argocd_app_name","var.app_repo_url","var.app_repo_branch","var.app_path","var.app_namespace"]}},"schema_version":1,"depends_on":["helm_release.argocd"]},{"address":"kubectl_manifest.argocd_cm_patch","mode":"managed","type":"kubectl_manifest","name":"argocd_cm_patch","provider_config_key":"module.argocd:kubectl","expressions":{"yaml_body":{"references":["var.argocd_url","local.github_oidc.github_oidc_client_id","local.github_oidc","local.github_oidc.github_oidc_client_secret","local.github_oidc"]}},"schema_version":1,"depends_on":["helm_release.argocd"]},{"address":"data.aws_secretsmanager_secret_version.admin_password","mode":"data","type":"aws_secretsmanager_secret_version","name":"admin_password","provider_config_key":"module.argocd:aws","expressions":{"secret_id":{"references":["var.admin_password_secret_name"]}},"schema_version":0},{"address":"data.aws_secretsmanager_secret_version.github_oidc_credentials","mode":"data","type":"aws_secretsmanager_secret_version","name":"github_oidc_credentials","provider_config_key":"module.argocd:aws","expressions":{"secret_id":{"references":["var.github_oidc_secret_name"]}},"schema_version":0}],"variables":{"admin_password_secret_name":{"description":"Name of the AWS Secrets Manager secret containing the ArgoCD admin password hash"},"app_namespace":{"default":"default","description":"Kubernetes namespace in which to deploy the ArgoCD-managed application"},"app_path":{"description":"Path within the Git repository that contains application manifests"},"app_repo_branch":{"default":"main","description":"Branch of the Git repository to track"},"app_repo_url":{"description":"Git repository URL containing application manifests or Helm charts"},"argocd_app_name":{"description":"Name of the ArgoCD application"},"argocd_url":{"description":"URL for accessing the ArgoCD web UI"},"aws_region":{"description":"AWS region where ArgoCD and related resources will be deployed"},"github_oidc_secret_name":{"default":"springapp/github_oidc_v2","description":"Name of the AWS Secrets Manager secret containing the GitHub OIDC client ID and secret as JSON"},"kubeconfig_path":{"description":"Path to the kubeconfig file used to authenticate to the EKS cluster"}}}},"eks":{"source":"../modules/eks","expressions":{"eks_node_sg_id":{"references":["module.security_group.eks_node_sg_id","module.security_group"]},"project_name":{"references":["var.project_name"]},"subnet_ids":{"references":["module.vpc.public_subnet_ids","module.vpc"]}},"module":{"outputs":{"cluster_name":{"expression":{"references":["aws_eks_cluster.eks_cluster.name","aws_eks_cluster.eks_cluster"]},"description":"The name of the EKS cluster"},"eks_cluster_certificate_authority":{"expression":{"references":["aws_eks_cluster.eks_cluster.certificate_authority[0].data","aws_eks_cluster.eks_cluster.certificate_authority[0]","aws_eks_cluster.eks_cluster.certificate_authority","aws_eks_cluster.eks_cluster"]},"description":"Base64-encoded certificate data required to communicate with the cluster"},"eks_cluster_endpoint":{"expression":{"references":["aws_eks_cluster.eks_cluster.endpoint","aws_eks_cluster.eks_cluster"]},"description":"API server endpoint for the EKS cluster"},"eks_cluster_id":{"expression":{"references":["aws_eks_cluster.eks_cluster.id","aws_eks_cluster.eks_cluster"]},"description":"The EKS cluster ID"},"eks_cluster_name":{"expression":{"references":["aws_eks_cluster.eks_cluster.name","aws_eks_cluster.eks_cluster"]},"description":"The EKS cluster name"},"node_security_group_id":{"expression":{"references":["var.eks_node_sg_id"]},"description":"Security group ID attached to the EKS worker nodes"},"oidc_provider_arn":{"expression":{"references":["data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","aws_eks_cluster.eks_cluster.identity[0].oidc[0].issuer","aws_eks_cluster.eks_cluster.identity[0].oidc[0]","aws_eks_cluster.eks_cluster.identity[0].oidc","aws_eks_cluster.eks_cluster.identity[0]","aws_eks_cluster.eks_cluster.identity","aws_eks_cluster.eks_cluster"]},"description":"OIDC provider ARN for IAM role trust relationships"},"oidc_provider_url":{"expression":{"references":["aws_eks_cluster.eks_cluster.identity[0].oidc[0].issuer","aws_eks_cluster.eks_cluster.identity[0].oidc[0]","aws_eks_cluster.eks_cluster.identity[0].oidc","aws_eks_cluster.eks_cluster.identity[0]","aws_eks_cluster.eks_cluster.identity","aws_eks_cluster.eks_cluster"]},"description":"OIDC provider URL for IAM OIDC integration"}},"resources":[{"address":"aws_eks_cluster.eks_cluster","mode":"managed","type":"aws_eks_cluster","name":"eks_cluster","provider_config_key":"aws","expressions":{"enabled_cluster_log_types":{"constant_value":["api","audit","authenticator","controllerManager","scheduler"]},"name":{"references":["var.project_name"]},"role_arn":{"references":["aws_iam_role.eks_cluster_role.arn","aws_iam_role.eks_cluster_role"]},"vpc_config":[{"endpoint_private_access":{"constant_value":true},"endpoint_public_access":{"constant_value":true},"subnet_ids":{"references":["var.subnet_ids"]}}]},"schema_version":1,"depends_on":["aws_iam_role_policy_attachment.eks_cluster_AmazonEKSClusterPolicy"]},{"address":"aws_eks_node_group.eks_nodes","mode":"managed","type":"aws_eks_node_group","name":"eks_nodes","provider_config_key":"aws","expressions":{"cluster_name":{"references":["aws_eks_cluster.eks_cluster.name","aws_eks_cluster.eks_cluster"]},"instance_types":{"references":["var.instance_type"]},"node_group_name":{"references":["var.project_name"]},"node_role_arn":{"references":["aws_iam_role.eks_node_role.arn","aws_iam_role.eks_node_role"]},"remote_access":[{"ec2_ssh_key":{"references":["var.key_name"]}}],"scaling_config":[{"desired_size":{"constant_value":2},"max_size":{"constant_value":3},"min_size":{"constant_value":1}}],"subnet_ids":{"references":["var.subnet_ids"]}},"schema_version":0,"depends_on":["aws_iam_role_policy_attachment.eks_worker_node_policies"]},{"address":"aws_eks_node_group.worker_nodes","mode":"managed","type":"aws_eks_node_group","name":"worker_nodes","provider_config_key":"aws","expressions":{"cluster_name":{"references":["aws_eks_cluster.eks_cluster.name","aws_eks_cluster.eks_cluster"]},"node_group_name":{"references":["var.project_name"]},"node_role_arn":{"references":["aws_iam_role.worker_nodes_role.arn","aws_iam_role.worker_nodes_role"]},"scaling_config":[{"desired_size":{"constant_value":2},"max_size":{"constant_value":3},"min_size":{"constant_value":1}}],"subnet_ids":{"references":["var.subnet_ids"]}},"schema_version":0},{"address":"aws_iam_openid_connect_provider.oidc_provider","mode":"managed","type":"aws_iam_openid_connect_provider","name":"oidc_provider","provider_config_key":"aws","expressions":{"client_id_list":{"constant_value":["sts.amazonaws.com"]},"thumbprint_list":{"constant_value":["9e99a48a9960b14926bb7f3b02e22da0ecd1b32a"]},"url":{"references":["aws_eks_cluster.eks_cluster.identity[0].oidc[0].issuer","aws_eks_cluster.eks_cluster.identity[0].oidc[0]","aws_eks_cluster.eks_cluster.identity[0].oidc","aws_eks_cluster.eks_cluster.identity[0]","aws_eks_cluster.eks_cluster.identity","aws_eks_cluster.eks_cluster"]}},"schema_version":0,"depends_on":["aws_eks_cluster.eks_cluster"]},{"address":"aws_iam_role.eks_cluster_role","mode":"managed","type":"aws_iam_role","name":"eks_cluster_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.eks_assume_role_policy.json","data.aws_iam_policy_document.eks_assume_role_policy"]},"name":{"references":["var.project_name"]}},"schema_version":0},{"address":"aws_iam_role.eks_node_role","mode":"managed","type":"aws_iam_role","name":"eks_node_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.node_assume_role.json","data.aws_iam_policy_document.node_assume_role"]},"name":{"references":["var.project_name"]}},"schema_version":0},{"address":"aws_iam_role.worker_nodes_role","mode":"managed","type":"aws_iam_role","name":"worker_nodes_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.worker_nodes_assume_role_policy.json","data.aws_iam_policy_document.worker_nodes_assume_role_policy"]},"name":{"references":["var.project_name"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.eks_cluster_AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_cluster_AmazonEKSClusterPolicy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy"},"role":{"references":["aws_iam_role.eks_cluster_role.name","aws_iam_role.eks_cluster_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.eks_worker_node_policies","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_worker_node_policies","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value"]},"role":{"references":["aws_iam_role.eks_node_role.name","aws_iam_role.eks_node_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.worker_nodes_AmazonEC2ContainerRegistryReadOnly","mode":"managed","type":"aws_iam_role_policy_attachment","name":"worker_nodes_AmazonEC2ContainerRegistryReadOnly","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"},"role":{"references":["aws_iam_role.worker_nodes_role.name","aws_iam_role.worker_nodes_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.worker_nodes_AmazonEKSWorkerNodePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"worker_nodes_AmazonEKSWorkerNodePolicy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy"},"role":{"references":["aws_iam_role.worker_nodes_role.name","aws_iam_role.worker_nodes_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.worker_nodes_AmazonEKS_CNI_Policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"worker_nodes_AmazonEKS_CNI_Policy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy"},"role":{"references":["aws_iam_role.worker_nodes_role.name","aws_iam_role.worker_nodes_role"]}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.eks_assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"eks_assume_role_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["eks.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.node_assume_role","mode":"data","type":"aws_iam_policy_document","name":"node_assume_role","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.worker_nodes_assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"worker_nodes_assume_role_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0}],"variables":{"eks_node_sg_id":{"description":"Security group ID for EKS worker nodes"},"instance_type":{"default":"t3.medium","description":"EC2 instance type for worker nodes"},"key_name":{"default":"","description":"SSH key name to connect to EC2 worker nodes"},"project_name":{"description":"Project name used for resource naming"},"subnet_ids":{"description":"List of subnet IDs for EKS worker nodes and control plane"}}}},"iam":{"source":"../modules/iam","expressions":{"namespace":{"constant_value":"argocd"},"oidc_provider_arn":{"references":["module.eks.oidc_provider_arn","module.eks"]},"oidc_provider_url":{"references":["module.eks.oidc_provider_url","module.eks"]},"policy_json":{"references":["path.module"]},"project_name":{"constant_value":"springapp"},"service_account_name":{"constant_value":"argocd-sa"}},"module":{"outputs":{"argo_policy_arn":{"expression":{"references":["aws_iam_policy.custom_policy.arn","aws_iam_policy.custom_policy"]},"description":"Custom IAM policy ARN attached to ArgoCD service account role"},"argo_service_account_role_arn":{"expression":{"references":["aws_iam_role.argo_service_account_role.arn","aws_iam_role.argo_service_account_role"]},"description":"IAM Role ARN for the ArgoCD service account"},"argo_service_account_role_name":{"expression":{"references":["aws_iam_role.argo_service_account_role.name","aws_iam_role.argo_service_account_role"]},"description":"IAM Role name for the ArgoCD service account"}},"resources":[{"address":"aws_iam_policy.custom_policy","mode":"managed","type":"aws_iam_policy","name":"custom_policy","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name"]},"policy":{"references":["var.policy_json"]}},"schema_version":0},{"address":"aws_iam_role.argo_service_account_role","mode":"managed","type":"aws_iam_role","name":"argo_service_account_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.oidc_assume_policy.json","data.aws_iam_policy_document.oidc_assume_policy"]},"name":{"references":["var.project_name"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.argo_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"argo_attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.custom_policy.arn","aws_iam_policy.custom_policy"]},"role":{"references":["aws_iam_role.argo_service_account_role.name","aws_iam_role.argo_service_account_role"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.oidc_assume_policy","mode":"data","type":"aws_iam_policy_document","name":"oidc_assume_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRoleWithWebIdentity"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"references":["var.namespace","var.service_account_name"]},"variable":{"references":["var.oidc_provider_url"]}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["var.oidc_provider_arn"]},"type":{"constant_value":"Federated"}}]}]},"schema_version":0}],"variables":{"namespace":{},"oidc_provider_arn":{},"oidc_provider_url":{},"policy_json":{},"project_name":{},"service_account_name":{}}}},"monitoring":{"source":"../modules/monitoring","expressions":{"alertmanager_storage_size":{"references":["var.alertmanager_storage_size"]},"namespace":{"constant_value":"monitoring"},"prometheus_storage_size":{"references":["var.prometheus_storage_size"]}},"module":{"outputs":{"grafana_admin_password":{"sensitive":true,"expression":{"references":["local.grafana_password"]}},"grafana_url":{"expression":{"references":["helm_release.kube_prometheus_stack.name","helm_release.kube_prometheus_stack","var.namespace"]},"description":"Internal URL for Grafana service"},"prometheus_url":{"expression":{"references":["helm_release.kube_prometheus_stack.name","helm_release.kube_prometheus_stack","var.namespace"]},"description":"Internal URL for Prometheus service"}},"resources":[{"address":"helm_release.kube_prometheus_stack","mode":"managed","type":"helm_release","name":"kube_prometheus_stack","provider_config_key":"module.monitoring:helm","expressions":{"chart":{"constant_value":"kube-prometheus-stack"},"create_namespace":{"constant_value":true},"name":{"constant_value":"kube-prometheus-stack"},"namespace":{"references":["var.namespace"]},"repository":{"constant_value":"https://prometheus-community.github.io/helm-charts"},"values":{"references":["local.merged_values"]},"version":{"constant_value":"45.5.0"}},"schema_version":1},{"address":"data.aws_secretsmanager_secret_version.grafana_admin_password","mode":"data","type":"aws_secretsmanager_secret_version","name":"grafana_admin_password","provider_config_key":"aws","expressions":{"secret_id":{"constant_value":"springapp/grafana/admin_password"}},"schema_version":0}],"variables":{"alertmanager_storage_size":{"default":"5Gi","description":"Storage size for Alertmanager"},"namespace":{"default":"monitoring","description":"Namespace for the monitoring stack"},"prometheus_storage_size":{"default":"10Gi","description":"Storage size for Prometheus"}}}},"natgateway":{"source":"../modules/natgateway","expressions":{"internet_gateway":{"references":["module.vpc.internet_gateway","module.vpc"]},"private_subnet_az1_id":{"references":["module.vpc.private_subnet_az1_id","module.vpc"]},"private_subnet_az2_id":{"references":["module.vpc.private_subnet_az2_id","module.vpc"]},"public_subnet_az1_id":{"references":["module.vpc.public_subnet_az1_id","module.vpc"]},"public_subnet_az2_id":{"references":["module.vpc.public_subnet_az2_id","module.vpc"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"resources":[{"address":"aws_eip.eip_for_nat_gateway_az1","mode":"managed","type":"aws_eip","name":"eip_for_nat_gateway_az1","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"},"tags":{"constant_value":{"Name":"nat gateway az1 eip"}}},"schema_version":0},{"address":"aws_eip.eip_for_nat_gateway_az2","mode":"managed","type":"aws_eip","name":"eip_for_nat_gateway_az2","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"},"tags":{"constant_value":{"Name":"nat gateway az2 eip"}}},"schema_version":0},{"address":"aws_nat_gateway.nat_gateway_az1","mode":"managed","type":"aws_nat_gateway","name":"nat_gateway_az1","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.eip_for_nat_gateway_az1.id","aws_eip.eip_for_nat_gateway_az1"]},"subnet_id":{"references":["var.public_subnet_az1_id"]},"tags":{"constant_value":{"Name":"nat gateway az1"}}},"schema_version":0,"depends_on":["var.internet_gateway"]},{"address":"aws_nat_gateway.nat_gateway_az2","mode":"managed","type":"aws_nat_gateway","name":"nat_gateway_az2","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.eip_for_nat_gateway_az2.id","aws_eip.eip_for_nat_gateway_az2"]},"subnet_id":{"references":["var.public_subnet_az2_id"]},"tags":{"constant_value":{"Name":"nat gateway az2"}}},"schema_version":0,"depends_on":["var.internet_gateway"]},{"address":"aws_route_table.private_route_table_az1","mode":"managed","type":"aws_route_table","name":"private_route_table_az1","provider_config_key":"aws","expressions":{"route":{"references":["aws_nat_gateway.nat_gateway_az1.id","aws_nat_gateway.nat_gateway_az1"]},"tags":{"constant_value":{"Name":"private route table az1"}},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0},{"address":"aws_route_table.private_route_table_az2","mode":"managed","type":"aws_route_table","name":"private_route_table_az2","provider_config_key":"aws","expressions":{"route":{"references":["aws_nat_gateway.nat_gateway_az2.id","aws_nat_gateway.nat_gateway_az2"]},"tags":{"constant_value":{"Name":"private route table az2"}},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0},{"address":"aws_route_table_association.private_subnet_az1_route_table_az1_association","mode":"managed","type":"aws_route_table_association","name":"private_subnet_az1_route_table_az1_association","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private_route_table_az1.id","aws_route_table.private_route_table_az1"]},"subnet_id":{"references":["var.private_subnet_az1_id"]}},"schema_version":0},{"address":"aws_route_table_association.private_subnet_az2_route_table_az2_association","mode":"managed","type":"aws_route_table_association","name":"private_subnet_az2_route_table_az2_association","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private_route_table_az2.id","aws_route_table.private_route_table_az2"]},"subnet_id":{"references":["var.private_subnet_az2_id"]}},"schema_version":0}],"variables":{"internet_gateway":{},"private_subnet_az1_id":{},"private_subnet_az2_id":{},"public_subnet_az1_id":{},"public_subnet_az2_id":{},"vpc_id":{}}}},"rds":{"source":"../modules/rds","expressions":{"eks_node_sg_id":{"references":["module.eks.node_security_group_id","module.eks"]},"secure_subnet_az1_id":{"references":["module.vpc.secure_subnet_az1_id","module.vpc"]},"secure_subnet_az2_id":{"references":["module.vpc.secure_subnet_az2_id","module.vpc"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"outputs":{"rds_db_endpoint":{"expression":{"references":["aws_db_instance.db_instance.endpoint","aws_db_instance.db_instance"]},"description":"The endpoint of the RDS instance"},"rds_security_group_id":{"expression":{"references":["aws_security_group.database_security_group.id","aws_security_group.database_security_group"]},"description":"The ID of the security group attached to the RDS DB"}},"resources":[{"address":"aws_db_instance.db_instance","mode":"managed","type":"aws_db_instance","name":"db_instance","provider_config_key":"aws","expressions":{"allocated_storage":{"constant_value":20},"availability_zone":{"references":["data.aws_availability_zones.available_zones.names[0]","data.aws_availability_zones.available_zones.names","data.aws_availability_zones.available_zones"]},"db_name":{"constant_value":"petclinic"},"db_subnet_group_name":{"references":["aws_db_subnet_group.database_subnet_group.name","aws_db_subnet_group.database_subnet_group"]},"engine":{"constant_value":"mysql"},"engine_version":{"constant_value":"8.0.35"},"identifier":{"constant_value":"petclinic"},"instance_class":{"constant_value":"db.t3.micro"},"multi_az":{"constant_value":false},"password":{"references":["local.db_credentials.mysql_password","local.db_credentials"]},"publicly_accessible":{"constant_value":false},"skip_final_snapshot":{"constant_value":true},"tags":{"constant_value":{"Name":"petclinic-rds"}},"username":{"references":["local.db_credentials.mysql_user","local.db_credentials"]},"vpc_security_group_ids":{"references":["aws_security_group.database_security_group.id","aws_security_group.database_security_group"]}},"schema_version":2},{"address":"aws_db_subnet_group.database_subnet_group","mode":"managed","type":"aws_db_subnet_group","name":"database_subnet_group","provider_config_key":"aws","expressions":{"description":{"constant_value":"Subnet group for RDS in secure/private subnets"},"name":{"constant_value":"db-secure-subnets"},"subnet_ids":{"references":["var.secure_subnet_az1_id","var.secure_subnet_az2_id"]},"tags":{"constant_value":{"Name":"db-secure-subnets"}}},"schema_version":0},{"address":"aws_security_group.database_security_group","mode":"managed","type":"aws_security_group","name":"database_security_group","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow MySQL access from EKS node group"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.eks_node_sg_id"]},"name":{"constant_value":"rds-security-group"},"tags":{"constant_value":{"Name":"rds-security-group"}},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"data.aws_availability_zones.available_zones","mode":"data","type":"aws_availability_zones","name":"available_zones","provider_config_key":"aws","schema_version":0},{"address":"data.aws_secretsmanager_secret_version.db_secret","mode":"data","type":"aws_secretsmanager_secret_version","name":"db_secret","provider_config_key":"aws","expressions":{"secret_id":{"constant_value":"arn:aws:secretsmanager:us-east-1:354918380509:secret:springapp/rds/credentials/v1-s5dhsD"}},"schema_version":0}],"variables":{"eks_node_sg_id":{},"secure_subnet_az1_id":{},"secure_subnet_az2_id":{},"vpc_id":{}}}},"security_group":{"source":"../modules/security_group","expressions":{"alb_ingress_cidrs":{"constant_value":["0.0.0.0/0"]},"project_name":{"constant_value":"springapp"},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"outputs":{"alb_sg_id":{"expression":{"references":["aws_security_group.alb_sg.id","aws_security_group.alb_sg"]}},"eks_node_sg_id":{"expression":{"references":["aws_security_group.eks_node_sg.id","aws_security_group.eks_node_sg"]}},"rds_sg_id":{"expression":{"references":["aws_security_group.rds_sg.id","aws_security_group.rds_sg"]}}},"resources":[{"address":"aws_security_group.alb_sg","mode":"managed","type":"aws_security_group","name":"alb_sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for ALB"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.alb_ingress_cidrs","var.alb_ingress_cidrs"]},"name":{"references":["var.project_name"]},"tags":{"references":["var.project_name"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_security_group.eks_node_sg","mode":"managed","type":"aws_security_group","name":"eks_node_sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"EKS worker node SG"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["aws_security_group.alb_sg.id","aws_security_group.alb_sg"]},"name":{"references":["var.project_name"]},"tags":{"references":["var.project_name"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_security_group.rds_sg","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"RDS DB SG"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["aws_security_group.eks_node_sg.id","aws_security_group.eks_node_sg"]},"name":{"references":["var.project_name"]},"tags":{"references":["var.project_name"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1}],"variables":{"alb_ingress_cidrs":{"description":"CIDRs allowed to access ALB"},"project_name":{"description":"Name prefix for resources"},"vpc_id":{"description":"VPC ID"}}}},"vpc":{"source":"../modules/vpc","expressions":{"private_subnet_az1_cidr":{"references":["var.private_subnet_az1_cidr"]},"private_subnet_az2_cidr":{"references":["var.private_subnet_az2_cidr"]},"project_name":{"references":["var.project_name"]},"public_subnet_az1_cidr":{"references":["var.public_subnet_az1_cidr"]},"public_subnet_az2_cidr":{"references":["var.public_subnet_az2_cidr"]},"region":{"references":["var.region"]},"secure_subnet_az1_cidr":{"references":["var.secure_subnet_az1_cidr"]},"secure_subnet_az2_cidr":{"references":["var.secure_subnet_az2_cidr"]},"vpc_cidr":{"references":["var.vpc_cidr"]}},"module":{"outputs":{"internet_gateway":{"expression":{"references":["aws_internet_gateway.internet_gateway.id","aws_internet_gateway.internet_gateway"]}},"private_subnet_az1_id":{"expression":{"references":["aws_subnet.private_subnet_az1.id","aws_subnet.private_subnet_az1"]}},"private_subnet_az2_id":{"expression":{"references":["aws_subnet.private_subnet_az2.id","aws_subnet.private_subnet_az2"]}},"project_name":{"expression":{"references":["var.project_name"]}},"public_subnet_az1_id":{"expression":{"references":["aws_subnet.public_subnet_az1.id","aws_subnet.public_subnet_az1"]}},"public_subnet_az2_id":{"expression":{"references":["aws_subnet.public_subnet_az2.id","aws_subnet.public_subnet_az2"]}},"public_subnet_ids":{"expression":{"references":["aws_subnet.public_subnet_az1.id","aws_subnet.public_subnet_az1","aws_subnet.public_subnet_az2.id","aws_subnet.public_subnet_az2"]}},"region":{"expression":{"references":["var.region"]}},"secure_subnet_az1_id":{"expression":{"references":["aws_subnet.secure_subnet_az1.id","aws_subnet.secure_subnet_az1"]}},"secure_subnet_az2_id":{"expression":{"references":["aws_subnet.secure_subnet_az2.id","aws_subnet.secure_subnet_az2"]}},"vpc_id":{"expression":{"references":["aws_vpc.infra.id","aws_vpc.infra"]}}},"resources":[{"address":"aws_eip.nat_eip","mode":"managed","type":"aws_eip","name":"nat_eip","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"},"tags":{"references":["var.project_name"]}},"schema_version":0},{"address":"aws_internet_gateway.internet_gateway","mode":"managed","type":"aws_internet_gateway","name":"internet_gateway","provider_config_key":"aws","expressions":{"tags":{"references":["var.project_name"]},"vpc_id":{"references":["aws_vpc.infra.id","aws_vpc.infra"]}},"schema_version":0},{"address":"aws_nat_gateway.nat_gateway","mode":"managed","type":"aws_nat_gateway","name":"nat_gateway","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.nat_eip.id","aws_eip.nat_eip"]},"subnet_id":{"references":["aws_subnet.public_subnet_az1.id","aws_subnet.public_subnet_az1"]},"tags":{"references":["var.project_name"]}},"schema_version":0,"depends_on":["aws_internet_gateway.internet_gateway"]},{"address":"aws_route_table.private_route_table","mode":"managed","type":"aws_route_table","name":"private_route_table","provider_config_key":"aws","expressions":{"route":{"references":["aws_nat_gateway.nat_gateway.id","aws_nat_gateway.nat_gateway"]},"tags":{"constant_value":{"Name":"private route table"}},"vpc_id":{"references":["aws_vpc.infra.id","aws_vpc.infra"]}},"schema_version":0},{"address":"aws_route_table.public_route_table","mode":"managed","type":"aws_route_table","name":"public_route_table","provider_config_key":"aws","expressions":{"route":{"references":["aws_internet_gateway.internet_gateway.id","aws_internet_gateway.internet_gateway"]},"tags":{"constant_value":{"Name":"public route table"}},"vpc_id":{"references":["aws_vpc.infra.id","aws_vpc.infra"]}},"schema_version":0},{"address":"aws_route_table_association.public_subnet_az1_assoc","mode":"managed","type":"aws_route_table_association","name":"public_subnet_az1_assoc","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public_route_table.id","aws_route_table.public_route_table"]},"subnet_id":{"references":["aws_subnet.public_subnet_az1.id","aws_subnet.public_subnet_az1"]}},"schema_version":0},{"address":"aws_route_table_association.public_subnet_az2_assoc","mode":"managed","type":"aws_route_table_association","name":"public_subnet_az2_assoc","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public_route_table.id","aws_route_table.public_route_table"]},"subnet_id":{"references":["aws_subnet.public_subnet_az2.id","aws_subnet.public_subnet_az2"]}},"schema_version":0},{"address":"aws_route_table_association.secure_subnet_az1_assoc","mode":"managed","type":"aws_route_table_association","name":"secure_subnet_az1_assoc","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private_route_table.id","aws_route_table.private_route_table"]},"subnet_id":{"references":["aws_subnet.secure_subnet_az1.id","aws_subnet.secure_subnet_az1"]}},"schema_version":0},{"address":"aws_route_table_association.secure_subnet_az2_assoc","mode":"managed","type":"aws_route_table_association","name":"secure_subnet_az2_assoc","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private_route_table.id","aws_route_table.private_route_table"]},"subnet_id":{"references":["aws_subnet.secure_subnet_az2.id","aws_subnet.secure_subnet_az2"]}},"schema_version":0},{"address":"aws_subnet.private_subnet_az1","mode":"managed","type":"aws_subnet","name":"private_subnet_az1","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available_zones.names[0]","data.aws_availability_zones.available_zones.names","data.aws_availability_zones.available_zones"]},"cidr_block":{"references":["var.private_subnet_az1_cidr"]},"map_public_ip_on_launch":{"constant_value":false},"tags":{"constant_value":{"Name":"private subnet az1"}},"vpc_id":{"references":["aws_vpc.infra.id","aws_vpc.infra"]}},"schema_version":1},{"address":"aws_subnet.private_subnet_az2","mode":"managed","type":"aws_subnet","name":"private_subnet_az2","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available_zones.names[1]","data.aws_availability_zones.available_zones.names","data.aws_availability_zones.available_zones"]},"cidr_block":{"references":["var.private_subnet_az2_cidr"]},"map_public_ip_on_launch":{"constant_value":false},"tags":{"constant_value":{"Name":"private subnet az2"}},"vpc_id":{"references":["aws_vpc.infra.id","aws_vpc.infra"]}},"schema_version":1},{"address":"aws_subnet.public_subnet_az1","mode":"managed","type":"aws_subnet","name":"public_subnet_az1","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available_zones.names[0]","data.aws_availability_zones.available_zones.names","data.aws_availability_zones.available_zones"]},"cidr_block":{"references":["var.public_subnet_az1_cidr"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"constant_value":{"Name":"public subnet az1"}},"vpc_id":{"references":["aws_vpc.infra.id","aws_vpc.infra"]}},"schema_version":1},{"address":"aws_subnet.public_subnet_az2","mode":"managed","type":"aws_subnet","name":"public_subnet_az2","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available_zones.names[1]","data.aws_availability_zones.available_zones.names","data.aws_availability_zones.available_zones"]},"cidr_block":{"references":["var.public_subnet_az2_cidr"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"constant_value":{"Name":"public subnet az2"}},"vpc_id":{"references":["aws_vpc.infra.id","aws_vpc.infra"]}},"schema_version":1},{"address":"aws_subnet.secure_subnet_az1","mode":"managed","type":"aws_subnet","name":"secure_subnet_az1","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available_zones.names[0]","data.aws_availability_zones.available_zones.names","data.aws_availability_zones.available_zones"]},"cidr_block":{"references":["var.secure_subnet_az1_cidr"]},"map_public_ip_on_launch":{"constant_value":false},"tags":{"constant_value":{"Name":"secure subnet az1"}},"vpc_id":{"references":["aws_vpc.infra.id","aws_vpc.infra"]}},"schema_version":1},{"address":"aws_subnet.secure_subnet_az2","mode":"managed","type":"aws_subnet","name":"secure_subnet_az2","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available_zones.names[1]","data.aws_availability_zones.available_zones.names","data.aws_availability_zones.available_zones"]},"cidr_block":{"references":["var.secure_subnet_az2_cidr"]},"map_public_ip_on_launch":{"constant_value":false},"tags":{"constant_value":{"Name":"secure subnet az2"}},"vpc_id":{"references":["aws_vpc.infra.id","aws_vpc.infra"]}},"schema_version":1},{"address":"aws_vpc.infra","mode":"managed","type":"aws_vpc","name":"infra","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.vpc_cidr"]},"enable_dns_hostnames":{"constant_value":true},"instance_tenancy":{"constant_value":"default"},"tags":{"references":["var.project_name"]}},"schema_version":1},{"address":"data.aws_availability_zones.available_zones","mode":"data","type":"aws_availability_zones","name":"available_zones","provider_config_key":"aws","schema_version":0}],"variables":{"private_subnet_az1_cidr":{},"private_subnet_az2_cidr":{},"project_name":{},"public_subnet_az1_cidr":{},"public_subnet_az2_cidr":{},"region":{},"secure_subnet_az1_cidr":{},"secure_subnet_az2_cidr":{},"vpc_cidr":{}}}}},"variables":{"alertmanager_storage_size":{"default":"5Gi","description":"Storage size for Alertmanager in monitoring stack"},"instance_type":{},"key_name":{},"mysql_password":{},"mysql_root_password":{},"mysql_user":{},"private_subnet_az1_cidr":{},"private_subnet_az2_cidr":{},"project_name":{},"prometheus_storage_size":{"default":"10Gi","description":"Storage size for Prometheus in monitoring stack"},"public_subnet_az1_cidr":{},"public_subnet_az2_cidr":{},"region":{},"secure_subnet_az1_cidr":{},"secure_subnet_az2_cidr":{},"vpc_cidr":{}}}},"relevant_attributes":[{"resource":"module.eks.data.aws_iam_policy_document.node_assume_role","attribute":["json"]},{"resource":"module.eks.data.aws_iam_policy_document.worker_nodes_assume_role_policy","attribute":["json"]},{"resource":"module.security_group.aws_security_group.alb_sg","attribute":["id"]},{"resource":"module.vpc.aws_internet_gateway.internet_gateway","attribute":["id"]},{"resource":"module.eks.aws_iam_role.worker_nodes_role","attribute":["name"]},{"resource":"module.iam.aws_iam_role.argo_service_account_role","attribute":["arn"]},{"resource":"module.vpc.aws_route_table.private_route_table","attribute":["id"]},{"resource":"module.natgateway.aws_nat_gateway.nat_gateway_az1","attribute":["id"]},{"resource":"module.vpc.data.aws_availability_zones.available_zones","attribute":["names",0]},{"resource":"module.eks.aws_eks_cluster.eks_cluster","attribute":["id"]},{"resource":"module.argocd.data.aws_secretsmanager_secret_version.github_oidc_credentials","attribute":["secret_string"]},{"resource":"module.monitoring.helm_release.kube_prometheus_stack","attribute":["name"]},{"resource":"module.vpc.aws_subnet.private_subnet_az1","attribute":["id"]},{"resource":"module.iam.data.aws_iam_policy_document.oidc_assume_policy","attribute":["json"]},{"resource":"module.security_group.aws_security_group.eks_node_sg","attribute":["id"]},{"resource":"module.iam.aws_iam_policy.custom_policy","attribute":["arn"]},{"resource":"module.alb_controller.helm_release.aws_lb_controller","attribute":["name"]},{"resource":"module.eks.aws_iam_role.eks_node_role","attribute":["arn"]},{"resource":"module.security_group.aws_security_group.rds_sg","attribute":["id"]},{"resource":"module.rds.data.aws_secretsmanager_secret_version.db_secret","attribute":["secret_string"]},{"resource":"module.natgateway.aws_nat_gateway.nat_gateway_az2","attribute":["id"]},{"resource":"module.vpc.aws_eip.nat_eip","attribute":["id"]},{"resource":"module.rds.aws_db_instance.db_instance","attribute":["endpoint"]},{"resource":"module.eks.aws_iam_role.eks_node_role","attribute":["name"]},{"resource":"module.eks.data.aws_iam_policy_document.eks_assume_role_policy","attribute":["json"]},{"resource":"module.eks.aws_eks_cluster.eks_cluster","attribute":["certificate_authority",0,"data"]},{"resource":"module.vpc.aws_vpc.infra","attribute":["id"]},{"resource":"module.eks.aws_iam_role.eks_cluster_role","attribute":["arn"]},{"resource":"module.vpc.aws_subnet.public_subnet_az1","attribute":["id"]},{"resource":"module.natgateway.aws_route_table.private_route_table_az1","attribute":["id"]},{"resource":"module.eks.data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"module.rds.aws_security_group.database_security_group","attribute":["id"]},{"resource":"module.vpc.aws_subnet.secure_subnet_az2","attribute":["id"]},{"resource":"module.vpc.aws_subnet.private_subnet_az2","attribute":["id"]},{"resource":"module.vpc.aws_subnet.secure_subnet_az1","attribute":["id"]},{"resource":"module.monitoring.data.aws_secretsmanager_secret_version.grafana_admin_password","attribute":["secret_string"]},{"resource":"module.vpc.data.aws_availability_zones.available_zones","attribute":["names",1]},{"resource":"module.eks.aws_iam_role.eks_cluster_role","attribute":["name"]},{"resource":"module.iam.aws_iam_role.argo_service_account_role","attribute":["name"]},{"resource":"module.natgateway.aws_eip.eip_for_nat_gateway_az1","attribute":["id"]},{"resource":"module.vpc.aws_subnet.public_subnet_az2","attribute":["id"]},{"resource":"module.eks.aws_eks_cluster.eks_cluster","attribute":["identity",0,"oidc",0,"issuer"]},{"resource":"module.natgateway.aws_eip.eip_for_nat_gateway_az2","attribute":["id"]},{"resource":"module.vpc.aws_route_table.public_route_table","attribute":["id"]},{"resource":"module.eks.aws_eks_cluster.eks_cluster","attribute":["endpoint"]},{"resource":"module.eks.aws_eks_cluster.eks_cluster","attribute":["name"]},{"resource":"module.rds.data.aws_availability_zones.available_zones","attribute":["names",0]},{"resource":"module.argocd.data.aws_secretsmanager_secret_version.admin_password","attribute":["secret_string"]},{"resource":"module.eks.aws_iam_role.worker_nodes_role","attribute":["arn"]},{"resource":"module.natgateway.aws_route_table.private_route_table_az2","attribute":["id"]},{"resource":"module.rds.aws_db_subnet_group.database_subnet_group","attribute":["name"]},{"resource":"module.vpc.aws_nat_gateway.nat_gateway","attribute":["id"]}],"timestamp":"2025-07-01T01:44:16Z","applyable":true,"complete":true,"errored":false}
